capsule SymbolTable {
    var label_addresses: dict<string, int> = {}

    func define_label(name: string, address: int) {
        label_addresses[name] = address
    }

    func resolve_label(name: string) -> int {
        if name in label_addresses {
            return label_addresses[name]
        }
        error("Undefined label: " + name)
    }
}
